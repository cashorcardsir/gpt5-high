<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Cup Loader Demo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Include the loader script -->
  <script src="cup-loader.js"></script>
  <script>
    // Initialize as early as possible
    document.addEventListener('DOMContentLoaded', function () {
      CupLoader.init({
        color: '#ff7a00',                // Orange liquid
        background: 'rgba(18, 18, 20, 0.92)',
        textColor: '#ffffff',
        includeBackgroundImages: true,
        showPercentage: true,
        minDuration: 500,                // keep on screen for at least 0.5s
        waveSpeedSec: 3.2
      });
    });
  </script>
  <style>
    /* Page styling for the demo content */
    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Noto Sans";
      color: #202127;
      background: #f7f7fa;
    }
    header {
      padding: 24px;
      background: #ffffff;
      box-shadow: 0 1px 0 rgba(0,0,0,0.06);
      position: sticky;
      top: 0;
      z-index: 9;
    }
    .container {
      max-width: 1080px;
      margin: 24px auto;
      padding: 0 16px;
    }
    h1 {
      margin-top: 0;
      font-size: 28px;
    }
    p {
      line-height: 1.6;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 16px;
      margin-top: 24px;
    }
    .card {
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 4px 14px rgba(0,0,0,0.08);
      overflow: hidden;
    }
    .card img {
      display: block;
      width: 100%;
      height: 200px;
      object-fit: cover;
    }
    .card .content {
      padding: 12px 14px;
    }
    .bg-sample {
      width: 100%;
      height: 160px;
      border-radius: 10px;
      background-image: url('https://picsum.photos/id/1015/1200/600'); /* CSS background image tracked by loader */
      background-size: cover;
      background-position: center;
      box-shadow: inset 0 0 0 1px rgba(0,0,0,0.06);
      margin: 24px 0;
    }
  </style>
</head>
<body>
  <header>
    <strong>Cup Loader Demo</strong>
  </header>

  <div class="container">
    <h1>A cup that fills while your page loads</h1>
    <p>
      This page uses a custom loader that shows a wavy orange liquid filling a cup. The fill
      reflects loading progress from DOM, web fonts, and images (including CSS background images).
      Once the content is ready, the cup fills to the top and the overlay fades away.
    </p>

    <div class="bg-sample"></div>

    <div class="grid">
      <div class="card">
        <img src="https://welling.ch/images/r/rw-21082025-v10-print-xl-3396.webp" alt="Dog on the grass"/>
        <div class="content">
          <h3>Card One</h3>
          <p>Some descriptive text about this image. It’s here mostly to give our loader something to track.</p>
        </div>
      </div>
      <div class="card">
        <img src="https://picsum.photos/id/1003/800/600" alt="Mountain landscape"/>
        <div class="content">
          <h3>Card Two</h3>
          <p>More text—this card demonstrates how images contribute to the progress.</p>
        </div>
      </div>
      <div class="card">
        <img src="https://picsum.photos/id/1011/800/600" alt="Ocean wave"/>
        <div class="content">
          <h3>Card Three</h3>
          <p>Even more content. By the time these images load, the cup should be nearly full.</p>
        </div>
      </div>
      <div class="card">
        <img src="https://picsum.photos/id/1039/800/600" alt="Forest trail"/>
        <div class="content">
          <h3>Card Four</h3>
          <p>Images are loaded from picsum.photos to simulate real network loading.</p>
        </div>
      </div>
    </div>

    <p>
      Tip: You can tweak the loader color, speed, or whether it counts background images via the CupLoader.init options.
      For accessibility, it respects reduced motion preferences.
    </p>
  </div>
</body>
</html>
